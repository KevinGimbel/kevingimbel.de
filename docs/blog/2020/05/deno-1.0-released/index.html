<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Deno 1.0 released &mdash; KevOps â€” DevOps, Cooking, and everything else I want to write about</title><meta name=author content="Kevin Gimbel"><meta name=description content="Personal website of Kevin Gimbel, DevOps Engineer, about photography, books, coding, devops, gaming, and whatever comes in between"><meta keywords="javascript node runtime rust  blog coding"><link rel=icon href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48dGV4dCB5PSIuOWVtIiBmb250LXNpemU9IjkwIj7wn6eZ4oCN4pmC77iPPC90ZXh0Pjwvc3ZnPg=="><style type=text/css>*{margin:0;padding:0;box-sizing:inherit}:root{--color-main: #403D58;--color-secondary: #dea584;--color-bg-box: #fefefe;--color-bg-page: #f1f1f1;--color-font-fg: #fff}html,body{box-sizing:border-box;font:20px/1.65 sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;background:var(--color-bg-page);border:.5rem solid var(--color-main)}::selection{background-color:var(--color-main);color:var(--color-secondary)}abbr{cursor:help;text-decoration:none;border-bottom:2px dotted var(--color-main)}a{color:var(--color-main);font-weight:700}.footer a,.author a,.intro-text a{color:var(--color-secondary);font-weight:700}.fg-accent{color:var(--color-secondary)}.x-small{font-size:.85rem}.xx-small{font-size:.65rem}.txt--ultra-large{font-size:4rem}.txt--large{font-size:2.5rem}.txt--medium{font-size:1.8rem}h1{font-size:2.46rem}h2{font-size:1.8rem}h3{font-size:1.6rem}.article-content h2,.article-content h3{margin-top:2rem}.section-headline{font-size:3.75em;margin-top:2rem;line-height:.75}.intro-splash{display:block;min-height:90vh;display:flex;align-items:center}.intro-text{padding:2rem;background:#222;color:var(--color-font-fg);font-size:140%}.footer{padding:2rem}hr{border:none;background:var(--color-main);height:2px}.footer{background:#222;color:var(--color-font-fg)}.main{padding-top:1.5rem;border-bottom:0;min-height:100vh}.main p{margin-top:1rem;margin-bottom:1.5rem}.exif{padding:.5rem;background:var(--color-secondary)}.exif li{display:inline-block;background:#333;color:#ccc;border-radius:3px;padding:.125rem .5rem;font-size:.8rem}.exif .label{font-size:.75rem}@media all and (max-width:800px){.exif li{margin-top:.5rem}.gallery img{max-width:100%}}figure img,figure picture{display:block;height:auto;width:auto;max-width:100%}.art figure img,.art figure picture,.photography figure img,.photography figure picture{width:auto}figcaption p{display:block;line-height:1.65;background:var(--color-secondary);color:var(--color-font-fg);margin-top:0;padding:.5rem;text-align:right;font-size:var(--font-small,.85rem)}figure{position:relative;z-index:1}figure+figure{margin-top:2rem}figcaption{display:flex;justify-content:flex-end}figcaption p{background:var(--color-secondary);color:var(--color-main);font-size:.85em;margin-top:1.5rem;position:relative}figcaption p::before{content:"";width:.15em;height:5rem;background:var(--color-secondary);position:absolute;left:1rem;top:-5rem;z-index:1}figure img,figure picture{position:relative;z-index:2}@media all and (min-width:800px){figure{width:100%}figcaption p{width:50%}.gallery{display:flex;flex-wrap:wrap;justify-content:flex-start}figure.gallery__figure{margin:0;padding:.25rem}.gallery__figure img,.gallery__figure picture{display:block;height:auto;width:100%;margin:0 auto}figure.gallery__figure--w-100{width:100%}figure.gallery__figure--w-50{width:50%}figure.gallery__figure--w-33{width:33%}figure.gallery__figure--w-25{width:25%}}p code,li code{background:var(--color-secondary);color:var(--color-main);padding:.125rem .25rem;border-radius:3px}.page-nav{background:var(--color-secondary);padding:1rem;margin-top:1rem}.page-nav a:not(:last-of-type){margin-right:.5rem}.subscribe-via{background:var(--color-main);color:var(--color-font-fg);padding:.1rem 1rem}.subscribe-via a{color:var(--color-font-fg)}.page-nav--label{display:block;font-size:.75em}.article-content{padding-bottom:2rem;max-width:40rem}.article-single{width:100%;max-width:60rem;margin:0 auto}.article-header h1{font-size:3.2rem}.article-content ol,.article-content ul{margin-left:2rem}.article-list__header{margin-bottom:2rem}.article-list__intro,.page-content{background:var(--color-bg-box);padding:2rem;margin:1rem 2rem 2rem 0}.article.article--in-list{position:relative;margin-bottom:10rem;max-width:55rem}.article-preview__heading{font-size:2.75rem}.publish-date{font-size:.85em}.article-preview__publish-date a{opacity:.75;text-decoration:none}pre{padding:1rem;overflow:auto}.tag-list__item{display:inline-block;background:var(--color-main);color:var(--color-secondary);border-radius:3px;padding:.125rem .25rem;margin-bottom:.5rem;margin-right:.5rem}.tag-list__item a{color:var(--color-secondary)}@media all and (min-width:800px){.footer,.author,.support{display:flex;justify-content:space-between}.author .left,.support .left,.footer .left{margin-bottom:0}}.author .left,.support .left,.footer .left{margin-bottom:2rem}.author,.support{background:var(--color-main);color:var(--color-font-fg);padding:4rem 2rem}.support+.author{margin-top:0}.support{background:var(--color-secondary);color:var(--color-main);flex-direction:column}.support a{color:var(--color-main)}.author p,.support p{margin-bottom:0}@media all and (min-width:800px){.author .right{padding-left:2rem}.author .avatar{margin-left:2rem}}.author .avatar{max-width:200px;transition:all linear 60s}.author .avatar:hover{animation:avatar-hue linear 15s infinite}@keyframes avatar-hue{from{filter:hue-rotate(0deg)}to{filter:hue-rotate(360deg)}}.age-note{background:#d46767;border:.35rem solid #b22222;padding:1rem 2rem;color:#222}.tags-categories,.license{background:var(--color-bg-box);padding:2rem}.side-by-side img{width:auto;max-width:100%}@media all and (min-width:640px){.tags-categories{display:flex}.tags-categories .tags{margin-left:2rem}.side-by-side{display:flex;flex-direction:row;align-items:center;margin:2rem 0}.side-by-side.align-top{align-items:flex-start}.side-by-side.align-bottom{align-items:flex-end}.side-by-side__first{margin-bottom:3rem}.side-by-side__off-left{margin-left:-20vw}.side-by-side .small{max-width:40%;padding:2rem}.side-by-side .bg{background:var(--color-main);color:var(--color-secondary)}.side-by-side .wide{max-width:60%}.w-40{width:40%}.w-50{width:50%}.w-60{width:60%}.side-by-side img,.side-by-side figure{max-width:100%;margin:0}}.note{background:var(--color-main);color:var(--color-font-fg);padding:1rem 1rem 1rem 2rem;border-left:.5rem solid var(--color-secondary);margin:2rem 1rem}.note__heading{font-weight:700;display:block}.taxonomy-list{display:flex;padding-bottom:2rem;align-content:flex-end;justify-content:space-between;flex-wrap:wrap}.taxonomy__item{width:20%;height:2rem;display:inline-block;padding:2rem 0}.taxonomy__item-inner{padding:1rem;background:var(--color-main);color:var(--color-secondary)}.taxonomy__item a{color:var(--color-secondary)}.article-note__content{font-size:1.3rem}.language-nav{font-size:.75rem}.language-nav ul{display:inline-block;list-style:none}blockquote{font-size:110%;font-style:italic;text-indent:1rem;border-left:.25rem solid var(--color-main);padding:.25rem 0;padding-left:1rem}.series__box:before{content:"";display:block;position:absolute;width:100%;height:100%;left:-1rem;top:-1rem;z-index:-1;border:2px solid var(--color-main)}.series__box{float:left;padding:2rem;margin:2rem;position:relative;background:var(--color-secondary);z-index:1;display:block;margin-left:-5vw}.tag-list__item{display:inline-block;background:var(--color-secondary);color:var(--color-main);padding:.125rem .25rem;border-radius:0;margin-bottom:.5rem;margin-right:.5rem;position:relative;padding:.25em .5em;z-index:1}.tag-list__item:before{content:"";width:100%;height:100%;border:2px solid var(--color-main);left:-.45em;top:-.45em;display:block;position:absolute;z-index:-1;transition:all linear .1s}.tag-list__item:hover::before{top:-.1rem;left:-.1rem}.tag-list__item a{color:var(--color-main);text-decoration:none}ul.tag-list,ul.category-list{margin-top:1rem}table{background:#fff;border-spacing:unset;border-right:1px solid;border-left:1px solid;width:calc(100% + 30rem);margin-left:-15rem}thead{background:var(--color-main);color:var(--color-secondary)}thead th{text-align:left;padding-left:.5rem}tbody td{padding:.5rem;border-bottom:1px solid #333}.intro-text{display:none}body.section-tags .intro-text,body.section-categories .intro-text{display:block}.rating-list{font-size:2rem}.support-cause-list__wrapper{display:flex;margin-top:2rem;justify-content:space-between}.support-cause-list{text-indent:1rem;margin-bottom:1rem}.support-cause-list li{margin-left:1rem}.support-cause-list .head{margin-left:-1rem;font-size:1.25em;list-style:none}.wavy-text{z-index:1;position:relative;display:block}.wavy-text::before{content:attr(data-css-text);width:100%;display:block;color:transparent;top:0;position:absolute;left:0;font-size:110%;text-decoration:underline;text-decoration-style:wavy;text-decoration-color:var(--color-secondary);z-index:2}.wavy-text--invert{--tmp-color-main: var(--color-main);--color-main: var(--color-secondary);--color-secondary: var(--tmp-color-main)}.wavy-text--inline{display:inline-block}.main-grid{display:grid;grid-template-columns:2fr 3fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"sidebar header header" "sidebar content content" "sidebar content content" "support support support" "footer footer footer"}.site-header{grid-column-start:sidebar;grid-column-end:sidebar;grid-row-start:1;grid-row-end:3}.site-main-content{grid-column-start:content;grid-column-end:content;grid-row-start:1;grid-row-end:4}.site-support{grid-column-start:support;grid-column-end:support;grid-row-start:4;grid-row-end:4;display:flex}.site-footer{grid-column-start:footer;grid-column-end:footer;grid-row-start:5;grid-row-end:5}@media all and (min-width:1200px){.nav-main{display:block;background:0 0;padding-top:2rem;padding-left:3rem}.nav-main li{display:block;margin:2rem 1rem;font-size:2rem}.nav-main li:first-of-type{margin-top:0}.nav-main li a{color:var(--color-main)}}.nav-item{display:block;position:relative}.nav-item--active a{font-size:120%;text-decoration:none}.settings summary{text-align:right}.settings{position:absolute;top:1.5rem;right:1.5rem}.settings-inner{font-size:.85rem;position:absolute;top:2rem;right:0;background:var(--color-secondary);padding:1rem;width:10rem}.settings details{position:relative}.settings-field{display:block;margin-bottom:1rem}.btn-color-switch{display:block}@media all and (max-width:1200px){body{border:.125rem solid var(--color-main)}.site-header{grid-column-start:sidebar;grid-column-end:header;grid-row-start:1;grid-row-end:1}.site-main-content{grid-column-start:sidebar;grid-column-end:content;grid-row-start:1;grid-row-end:4}.site-support{grid-column-start:support;grid-column-end:support;grid-row-start:4;grid-row-end:4;flex-direction:column}.author{border:1px solid var(--color-secondary);border-style:inset}.site-footer{grid-column-start:footer;grid-column-end:footer;grid-row-start:5;grid-row-end:5}.support-cause-list__wrapper{display:flex;justify-content:space-between;flex-direction:row}ul.nav-main{display:block;padding:1rem}.nav-item{display:inline-block;padding-right:1rem}.intro-splash__content .txt--ultra-large{font-size:1.8rem}.intro-splash__content .txt--large,.intro-splash__content .txt--medium{font-size:1.2rem}.main{padding:1rem .5rem}.support-cause-list__wrapper{flex-direction:column}.article-header h1,.article-preview__heading{font-size:2.2rem}.article-list__intro,.page-content{margin:2rem 0;padding:1rem}}@media all and (max-width:800px){.main-grid{display:block}.article-content .side-by-side{padding:0 1rem}}.nav-footer li{display:inline-block;margin-right:1rem}body.type-page .article-content p,body.type-page .article-content h1,body.type-page .article-content h2,body.type-page .article-content h3,body.type-page .article-content h4,body.type-page .article-content h5,body.type-page .article-content h6,body.type-page .article-content ul,body.type-page .article-header{padding-left:2rem;padding-right:2rem}body.type-page figure{max-width:70rem;max-width:fit-content;margin:0 auto}body.type-page .site-header{grid-column-start:sidebar;grid-column-end:header;grid-row-start:unset;grid-row-end:1}body.type-page .site-main-content{grid-column-start:sidebar;grid-column-end:content;grid-row-start:1;grid-row-end:4}body.type-page .article-single,body.type-page .article-content{max-width:100%}body.type-page .site-header{display:flex;align-items:center;justify-content:space-between}body.type-page .nav-main{padding-left:1rem;padding-top:0}body.type-page .nav-main li{display:inline-block}@media all and (min-width:800px){body.type-page:not(.section-blog) .main{padding-left:2rem}}@media all and (max-width:800px){body.type-page .article-header{padding-left:1rem;padding-right:1rem}}</style></head><body class="type-page section-blog"><script type=text/javascript>(function(window,document,undefined){let theme=window.localStorage.getItem("kgde_theme");if(theme){var[colorMain,colorSecondary]=JSON.parse(theme).colors;document.body.style=`--color-main:${colorMain};--color-secondary:${colorSecondary}`;}else{let themes=[["#123D3C","#90F072"],["#403D58","#dea584"],["#400E3B","#DCC78A"],["#17098D","#EADD1C"],["#233B07","#FFDD6D"],["#37059F","#D1D99F"]]
var[colorMain,colorSecondary]=themes[Math.floor(Math.random()*themes.length)];document.body.style=`--color-main:${colorMain};--color-secondary:${colorSecondary}`;}
document.addEventListener('DOMContentLoaded',function(){let schema_btn=document.querySelector("#btn_schema");let theme=window.localStorage.getItem("kgde_theme");let text_keep=document.querySelector("#widget_color_changer_txt_keep").textContent;let text_random=document.querySelector("#widget_color_changer_txt_random").textContent;if(theme){schema_btn.textContent=text_random;}else{schema_btn.textContent=text_keep;}
schema_btn.style.display="block";schema_btn.addEventListener('click',function(e){if(theme){window.localStorage.removeItem("kgde_theme");window.location=window.location;}else{window.localStorage.setItem("kgde_theme",JSON.stringify({colors:[colorMain,colorSecondary]}));window.location=window.location;}});let resizer=document.querySelector("#resizer");let article_content_el=document.querySelector(".article-single")||document.querySelector(".page-content");let width=window.localStorage.getItem("kgde_theme_width");if(!width){window.localStorage.setItem("kgde_theme_width",80);content_update_size(width,article_content_el);}
if(resizer){let opts=resizer.querySelectorAll("option");opts.forEach(entry=>{entry.selected=entry.value==width;})}
if(resizer&&article_content_el){if(width){content_update_size(width,article_content_el);}
resizer.addEventListener("change",(event)=>{let size=event.target.value;content_update_size(size,article_content_el);window.localStorage.setItem("kgde_theme_width",size);})}else{resizer.parentNode.style.display="none";}});function content_update_size(size,element){switch(size){case "full":element.style+="";break;default:element.style=`max-width: ${size}rem; margin: 0 auto;`;break;}}}(window,document));</script><span style=display:none aria-hidden=true id=widget_color_changer_txt_keep>Keep current color theme</span>
<span style=display:none aria-hidden=true id=widget_color_changer_txt_random>Use random color theme</span><section class=main-grid><header class=site-header><nav role=navigation id=navigation aria-label="Main Navigation"><ul class=nav-main><li class=nav-item><a href=/ data-perm=/blog/2020/05/deno-1.0-released/>Home</a></li><li class=nav-item><a href=/blog/ data-perm=/blog/2020/05/deno-1.0-released/>Blog</a></li><li class=nav-item><a href=/about/ data-perm=/blog/2020/05/deno-1.0-released/>About</a></li><li class=nav-item><a href=/photography/ data-perm=/blog/2020/05/deno-1.0-released/>Photography</a></li></ul></nav><section class=settings><details><summary>Settings</summary><div class=settings-inner><label for=btn_schema class=settings-field>Color<br><button id=btn_schema class=btn-color-switch></button></label>
<label for=resizer class=settings-field>Content width<br><select name=resize id=resizer>
<option value=40>Small</option>
<option value=60>Medium</option>
<option value=80>Large</option>
<option value=full>Full</option></select></label></div></details></section></header><section class=site-main-content><main id=main class=main><section class=article-single><header class=article-header><h1>Deno 1.0 released</h1><p class=publish-date>Published on 05/18/2020</p></header><article class=article-content><div class=content><p>Deno made its first stable release with the release of v1!</p><p>I&rsquo;ve heard of Deno in the past but I never really cared for it. My work with JavaScript has always been in the browser and I&rsquo;m not too much of a NodeJS fan - mainly because of the security and sandbox aspects of the runtime (or more, the lack of them). Deno aims to do better and fix some (or all?) of the NodeJS mistakes, like making access to the filesystem and network impossible unless allowed. In NodeJS, a script can read, write, send and receive network packages and basically do whatever it wants - there&rsquo;s little restriction and this has lead to malicious code executions in the past.</p><h2 id=quick-overview>Quick overview</h2><p>Deno is a JavaScript runtime that supports TypeScript out of the box. We can write regular JavaScript and execute it through the Deno toolchain, as the following example shows.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>// file: hello.ts
</span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Hello from Deno!&#34;</span>);
</code></pre></div><p>If we save the file as <code>hello.ts</code> we can just run it.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ deno run hello.ts
Hello from Deno!
</code></pre></div><p>This means with Deno all the benefits of TypeScript can be used out of the box, like &mldr; Types. ðŸ˜¬</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>// file: sum.ts
</span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sum</span>(<span style=color:#a6e22e>a</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>b</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> {
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>;
}
</code></pre></div><p>By annotating the parameters (<code>a: number</code>) we can tell the compiler what type of parameter this functions expects. If we try to execute it with a wrong type, the compiler throws an error.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>// file: ts_example.ts
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>sum</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./sum.ts&#34;</span>;

<span style=color:#a6e22e>sum</span>(<span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#34;6&#34;</span>);
</code></pre></div><p>When we try to tun the script with Deno, we get a nice error message:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ deno run ts_example.ts
Compile file:///Users/kevingimbel/Development/private/deno/hello-world/ts_example.ts
error: Uncaught TypeError: sum is not a <span style=color:#66d9ef>function</span>
console.log<span style=color:#f92672>(</span>sum<span style=color:#f92672>(</span>4, <span style=color:#e6db74>&#34;6&#34;</span><span style=color:#f92672>))</span>;
            ^
    at file:///Users/kevingimbel/Development/private/deno/hello-world/ts_example.ts:3:13
</code></pre></div><p>Types are incredibly helpful and in my opinion TypeScript is a blessing to the JavaScript world. Strong types are also one of the things I love about Rust - it just makes things clear and clean, even if it is hard sometimes.</p><h2 id=file-system-access>File system access</h2><p>Besides out-of-the-box TypeScript support, Denos security concept makes it very interesting, especially when you think about a Enterprise context and running code on servers where tight sandboxing and access control is important.</p><p>Here&rsquo;s another example. We use the std library <code>fs</code> module and the async function <code>exists</code> to check if a directory exists. If we run the code as it is with <code>deno run dir.ts</code> it will fail.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>// file: dir.ts
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>exists</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;https://deno.land/std/fs/mod.ts&#34;</span>;

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>my_dir_exists</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#34;./foo&#34;</span>); <span style=color:#75715e>// returns a Promise&lt;boolean&gt;
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>my_dir_exists</span>) {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Found directory!&#34;</span>);
} <span style=color:#66d9ef>else</span> {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Directory doesn&#39;t exist&#34;</span>);
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ deno run dir.ts
error: Uncaught PermissionDenied: read access to <span style=color:#e6db74>&#34;/Users/kevingimbel/Development/private/deno/hello-world/foo&#34;</span>, run again with the --allow-read flag
    at unwrapResponse <span style=color:#f92672>(</span>$deno$/ops/dispatch_json.ts:43:11<span style=color:#f92672>)</span>
    at Object.sendAsync <span style=color:#f92672>(</span>$deno$/ops/dispatch_json.ts:98:10<span style=color:#f92672>)</span>
    at async lstat <span style=color:#f92672>(</span>$deno$/ops/fs/stat.ts:69:16<span style=color:#f92672>)</span>
    at async exists <span style=color:#f92672>(</span>https://deno.land/std/fs/exists.ts:8:5<span style=color:#f92672>)</span>
    at async file:///Users/kevingimbel/Development/private/deno/hello-world/dir.ts:8:23
</code></pre></div><p>As it turns out, we do not have write access so the script cannot check if a directory exists - this also means none of our dependencies can access the file system! To give the script read access the <code>--allow-read</code> flag can be used.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ deno run --allow-read dir.ts 
Directory doesn<span style=color:#960050;background-color:#1e0010>&#39;</span>t exist
</code></pre></div><p><code>--allow-read</code> takes a directory as parameter, so the read access can be restricted to only a certain directory and sub-directories, as the following example shows:</p><p>Given the directory structure</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>â”œâ”€â”€ dir.ts
â”œâ”€â”€ test1
â”œâ”€â”€ test2
</code></pre></div><p>Access to can be restricted to only <code>test1</code> with <code>--allow-read=./test1</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>// file: dir_test1.ts
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>exists</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;https://deno.land/std/fs/mod.ts&#34;</span>;

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>my_dir_exists</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#34;./test1&#34;</span>); <span style=color:#75715e>// returns a Promise&lt;boolean&gt;
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>my_dir_exists</span>) {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Found directory!&#34;</span>);
} <span style=color:#66d9ef>else</span> {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Directory doesn&#39;t exist&#34;</span>);
}
</code></pre></div><p>Here the script is executed with both directories - for some reason I needed the <code>--unstable</code> flag when a directory is passed to <code>--allow-read</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ deno run --allow-read<span style=color:#f92672>=</span>./test2 --unstable dir_test1.ts 
error: Uncaught PermissionDenied: read access to <span style=color:#e6db74>&#34;/Users/kevingimbel/Development/private/deno/hello-world/test1&#34;</span>, run again with the --allow-read flag
    at unwrapResponse <span style=color:#f92672>(</span>$deno$/ops/dispatch_json.ts:43:11<span style=color:#f92672>)</span>
    at Object.sendAsync <span style=color:#f92672>(</span>$deno$/ops/dispatch_json.ts:98:10<span style=color:#f92672>)</span>
    at async lstat <span style=color:#f92672>(</span>$deno$/ops/fs/stat.ts:69:16<span style=color:#f92672>)</span>
    at async exists <span style=color:#f92672>(</span>https://deno.land/std/fs/exists.ts:8:5<span style=color:#f92672>)</span>
    at async file:///Users/kevingimbel/Development/private/deno/hello-world/dir_test1.ts:8:23

$ deno run --allow-read<span style=color:#f92672>=</span>./test1 --unstable dir_test1.ts 
Found directory!
</code></pre></div><p>I&rsquo;m incredibly excited for the future of Deno and I hope it will shift the JavaScript world into a more sandboxed, secure future. So far it is very promising.</p><p>The full announcement blog post can be found <a href=https://deno.land/v1>on the deno blog</a></p></div></article></section><section class=tags-categories><section class=categories><h3>Categories</h3><ul class=tag-list><li class=tag-list__item><a class=tag-list__link title="View all posts categorized under coding" href=https://kevingimbel.de/categories/coding/>coding</a></li></ul></section><section class=tags><h3>Tags</h3><ul class=tag-list><li class=tag-list__item><a class=tag-list__link title="View all posts tagged with javascript" href=https://kevingimbel.de/tags/javascript/>javascript</a></li><li class=tag-list__item><a class=tag-list__link title="View all posts tagged with node" href=https://kevingimbel.de/tags/node/>node</a></li><li class=tag-list__item><a class=tag-list__link title="View all posts tagged with runtime" href=https://kevingimbel.de/tags/runtime/>runtime</a></li><li class=tag-list__item><a class=tag-list__link title="View all posts tagged with rust" href=https://kevingimbel.de/tags/rust/>rust</a></li></ul></section></section></main></section><section class=site-support><section class=support><h4>Like this?</h4><p>If this content has helped you or your company, consider making a donation to a good cause.</p><p>For example, consider donating to the following causes:</p><div class=support-cause-list__wrapper><ul class=support-cause-list><li class=head><b>International</b></li><li><a rel=nofollow href=https://donate.doctorswithoutborders.org/onetime.cfm>Doctors without borders</a></li><li><a rel=nofollow href=https://www.amnesty.org/en/donate/>Amnesty International</a></li></ul><ul class=support-cause-list><li class=head><b>Germany</b></li><li><a rel=nofollow href=https://www.uno-fluechtlingshilfe.de/unterstuetzen/spenden/jetzt-spenden/>UNO FlÃ¼chtlingshilfe</a></li><li><a rel=nofollow href=https://www.amnesty.de/spenden>Amnesty</a></li><li><a rel=nofollow href=https://www.greenpeace.de/spenden>Greenpeace</a></li></ul></div></section><section class=author><div class=left><img src=/images/general/mask-moshed_hud020fe899933685564972ef591654996_344172_200x200_resize_q75_box.jpg alt="A colorful image of me wearing my DIY mask. The image has a colorful glitch effect." class=avatar></div><div class=right><p>Kevin Gimbel</p><p><strong>is a DevOps Engineer and avid (Video) Gamer</strong>. He&rsquo;s also interested in Sci-Fi, Cyberpunk, and dystopian books.</p><p><em>Wearing a mask is a good idea!</em></p><p>You can find out more <a href=/about/>about me</a> if you wish.</p></div></section></section><footer class="site-footer footer"><nav role=navigation id=footer-navigation aria-label="Secondary Navigation"><p>More sections on this site</p><ul class=nav-footer><li class=nav-item><a href=/reading/>Reading</a></li><li class=nav-item><a href=/art/>Art</a></li><li class=nav-item><a href=/now/>Now</a></li></ul></nav><div class=left><p>&copy; 2009 - 2020 Kevin Gimbel. <a href=https://github.com/kevingimbel/kevingimbel.de/blob/master/LICENSE title="View License on GitHub.com">License</a>. <a href=/blog/2020/01/no-tracking/>No Tracking</a>.</p><p><small>Follow me on <a href=https://bullgit.party/@kevin title="Follow my Mastodon Account on bullgit.party" rel=me>Mastodon @kevin@bullgit.party</a></small></p><p><small>Got more to say? Contact me on Matrix <a href=https://matrix.to/#/@kevingimbel:bullgit.science title="Contact me via Matrix">@kevingimbel:bullgit.science</a></a></small></p></div><div class=right><p><small class=xx-small>Found an issue? Edit this <a href=https://github.com/kevingimbel/kevingimbel.de/tree/master/content/blog/2020-05-18-deno-v1.md>page on GitHub.com</a></a></small></p><p><small class=xx-small>Made in Europe ðŸ‡ªðŸ‡º with love, <a href=/thanks>open source code</a> and <a href=https://gohugo.io/ title="Hugo static site generator" rel=nofollow>hugo</a>.<span class=fg-accent>&#9829;</span>.</small></p><p><small class=xx-small><a href=/legal>Imprint</a></small></p><p><small class=xx-small><code>Â¯\_(ãƒ„)_/Â¯</code></small></p></div></footer></section></body></html>
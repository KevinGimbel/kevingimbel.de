<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Using Archetypes in Hugo &mdash; KevOps</title><meta name=author content="Kevin Gimbel"><meta name=description content="Personal website of Kevin Gimbel, Full-Stack Developer and DevOps Engineer, about photography, books, coding, devops, gaming, and whatever comes in between"><meta keywords="hugo static_website automation  blog coding"><link rel=stylesheet href=/style.css></head><body><header class=intro-text><span>Using Archetypes in Hugo</span></header><nav role=navigation id=navigation aria-label="Main Navigation"><ul class=nav-main><li><a href=/><span>Home</span></a></li><li><a href=/about/><span>About</span></a></li><li><a href=/blog/><span>Blog</span></a></li><li><a href=/photography/><span>Photography</span></a></li><li><a href=/reading/><span>Reading</span></a></li><li><a href=/art/><span>Art</span></a></li><li><a href=/now/><span>Now</span></a></li></ul></nav><main id=main class=main><section class=article-single><article class=article-content><p>Written on <time datetime="2020-01-07 00:00:00 +0000 UTC">07. Jan 2020</time></p><p>For the longest time I completely ignored <a href=https://gohugo.io/content-management/archetypes/ title="Read hugo archetype documentation">archetypes in hugo</a>. I&rsquo;d always copy over the front-matter from the last blog post I wrote and then fill in the things I needed - leading to some mistakes (e.g. using <code>category</code> instead of <code>categories</code>) over time.</p><p>Archetypes are easy to use, for example to create this post I ran the following command</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ hugo new blog/2020-01-07-using-archetypes-in-hugo.md
</code></pre></div><p>This copied over the archetype file from <code>archetypes/blog.md</code> and automatically filled in the post tile, date, last modified date, and the defaults for categories, tags, type, and whatever else I have in the template file. Since Hugo 0.49 archetypes can consist of an entire directory structure that will be created. This is helpful for my <a href=/photography/>photography</a> section where a post consists of an <code>index.md</code> file and some images that are automatically loaded. The structure looks like this.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>archetypes
â”œâ”€â”€ blog.md
â””â”€â”€ photography
    â””â”€â”€ index.md
</code></pre></div><p>For this type of post the <code>--kind</code> flag must be added to the command as shown below.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ hugo new photography/my-photo-post
</code></pre></div><p>This command will create a directory named <code>my-photo-post</code> in <code>content/photography/my-photo-post</code>. Neat!</p><h2 id=hugo-template-magic>Hugo template magic</h2><p>As if this wasn&rsquo;t good enough, we can use the full set of Hugo template functions and script even more!</p><p>The archetype for new blog posts I use looks like this.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---
<span style=color:#66d9ef>title</span>: <span style=color:#e6db74>&#34;{{ replace (replace .Name &#34;</span>-<span style=color:#e6db74>&#34; &#34;</span> <span style=color:#e6db74>&#34;) (now.Format &#34;</span><span style=color:#ae81ff>2006</span> <span style=color:#ae81ff>01</span> <span style=color:#ae81ff>02</span> <span style=color:#e6db74>&#34;) &#34;</span><span style=color:#e6db74>&#34; | title }}&#34;</span>
<span style=color:#66d9ef>intro_text</span>: <span style=color:#e6db74>&#34;&#34;</span>
<span style=color:#66d9ef>type</span>: blog
<span style=color:#66d9ef>categories</span>:
    - coding
<span style=color:#66d9ef>tags</span>:
    - 
<span style=color:#66d9ef>date</span>: <span style=color:#e6db74>&#34;{{ now.Format &#34;</span><span style=color:#e6db74>2006-01-02</span><span style=color:#e6db74>&#34; }}&#34;</span>
<span style=color:#66d9ef>lastmod</span>: <span style=color:#e6db74>&#34;{{ now.Format &#34;</span><span style=color:#e6db74>2006-01-02</span><span style=color:#e6db74>&#34; }}&#34;</span>
---
</code></pre></div><p>In the first line the post <code>title</code> is set which is taken from the file name. I use filenames like <code>2020-01-02-a-post.md</code> on my blog which include the full date and then the post tile and the <code>.md</code> file extension for markdown. The <code>.md</code> is automatically stripped away which leaves a string like <code>2020-01-02-a-post</code>. The first replace (<code>replace .Name "-" " "</code>) turns this into <code>2020 01 02 a post</code>, the next replace (<code>replace (replace .Name "-" " ") (now.Format "2006 01 02 ") ""</code>) takes this string and strips the date, see the detailed steps below.</p><p>We assume that <code>.Name</code> equals &ldquo;2020-01-02-a-post&rdquo;:</p><ol><li><code>replace (replace .Name "-" " ") (now.Format "2006 01 02 ") ""</code></li><li><code>replace "2020 01 02 a post" (now.Format "2006 01 02 ") ""</code></li><li><code>replace "2020 01 02 a post" "2020 01 02" ""</code></li><li><code>"a post"</code></li></ol><p>So after the whole code is executed, we have the plain title. This title is then passed to the function named <code>title</code> which is doing capitalization, leaving us with a nicely formatted title.</p><p>As shown above, I also set the <code>date</code> and <code>lastmod</code> times using Hugo template functions.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#66d9ef>date</span>: <span style=color:#e6db74>&#34;{{ now.Format &#34;</span><span style=color:#e6db74>2006-01-02</span><span style=color:#e6db74>&#34; }}&#34;</span>
<span style=color:#66d9ef>lastmod</span>: <span style=color:#e6db74>&#34;{{ now.Format &#34;</span><span style=color:#e6db74>2006-01-02</span><span style=color:#e6db74>&#34; }}&#34;</span>
</code></pre></div><p>Both dates will be set to the same as this (new) article hasn&rsquo;t been modified yet. <code>lastmod</code> does only change when I update an article later on.</p></article></section><section class=tags-categories><section class=categories><h3>Categories</h3><ul class=tag-list><li class=tag-list__item><a class=tag-list__link title="View all posts categorized under coding" href=https://kevingimbel.de/categories/coding/>coding</a></li></ul></section><section class=tags><h3>Tags</h3><ul class=tag-list><li class=tag-list__item><a class=tag-list__link title="View all posts tagged with hugo" href=https://kevingimbel.de/tags/hugo/>hugo</a></li><li class=tag-list__item><a class=tag-list__link title="View all posts tagged with static_website" href=https://kevingimbel.de/tags/static_website/>static_website</a></li><li class=tag-list__item><a class=tag-list__link title="View all posts tagged with automation" href=https://kevingimbel.de/tags/automation/>automation</a></li></ul></section></section><section class=support><h4>Like this?</h4><p>This wesbite contains no <em>advertisement</em>, no <em>tracking</em>, no paid articles, and no
shady-things-whatsoever. It is just content, provided free of charge and with accessibility in mind.</p><p>If you would like to support me in providing <a href=/blog>content</a> - and <a href=https://github.com/kevingimbel title="View open source code by Kevin Gimbel on GitHub">code</a> - for
free or if this page has helped you or your company, consider supporting me directly.</p><p>You can support me through:</p><ul><li><a href=https://paypal.me/kevingimbel>PayPal</a></li><li><a href=https://liberapay.com/kevin/>Liberapay</a></li></ul></section><section class=author><div class=left><img src=/img/self-2019-small.jpg alt class=avatar></div><div class=right><h4>Kevin Gimbel</h4><p><strong>is a DevOps Engineer and avid (Video) Gamer</strong>. He's also interested in Sci-Fi, Cyberpunk, and
dystopian books.<br>You can find out more <a href=/about/ title="Read more about me">about me</a> if you wish.</p><p>Follow me on <a href=https://bullgit.party/@kevin rel=nofollow title="Follow Kevin Gimbel on Mastodon, the decentralised social network">Mastodon</a>.</p></div></section></main><footer class=footer><div class=left><p>&copy; 2009 - 2020 Kevin Gimbel. See <a href=https://github.com/kevingimbel/kevingimbel.de/blob/master/LICENSE title="View license on GitHub.com">License</a>. <a href=/blog/2020/01/no-tracking/>No Tracking</a>.</p><p><small>Follow me on Mastodon <a href=https://bullgit.party/@kevin rel=me>kevin@bullgit.party</a></small></p><p><small>You can contact me on Matrix at <a href=https://matrix.to/#/@kevingimbel:bullgit.science title="Contact me on Matrix, a decentralised real-time messenger">@kevingimbel:bullgit.science</a></small></p></div><div class=right><p><small class=xx-small>Found an issue? <a href=https://github.com/kevingimbel/kevingimbel.de/tree/master/content/blog/2020-01-07-using-archetypes-in-hugo.md>Edit on
GitHub</a></small></p><p><small class=xx-small>Made in Europe ðŸ‡ªðŸ‡º with love, <a href=/thanks>open source code</a> and <a href=https://gohugo.io/ title="Hugo static site generator" rel=nofollow>hugo</a>.<span class=fg-accent>&#9829;</span>.</small></p><p><small class=xx-small><a href=/legal>Impressum / Imprint</a></small></p><p><small class=xx-small><code>Â¯\_(ãƒ„)_/Â¯</code></small></p></div></footer></body></html>
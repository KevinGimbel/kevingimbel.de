<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TIL: Bash select &mdash; KevOps</title>
    <meta name="author" content="Kevin Gimbel">
    <meta name="description" content="Personal website of Kevin Gimbel, Full-Stack Developer and DevOps Engineer, about photography, books, coding, devops, gaming, and whatever comes in between">
    <meta keywords="bash til shell  blog coding devops  ">
    <link rel="stylesheet" href="/style.css">
    </head>

<body>
    
    <header class="intro-text">
        TIL: Bash select
    </header>
    

    <nav role="navigation" id="navigation" aria-label="Main Navigation">
        <ul class="nav-main"><li class="">
                <a href="/">
                    <span>Home</span>
                </a>
            </li><li class="">
                <a href="/about/">
                    <span>About</span>
                </a>
            </li><li class="">
                <a href="/blog/">
                    <span>Blog</span>
                </a>
            </li><li class="">
                <a href="/photography/">
                    <span>Photography</span>
                </a>
            </li><li class="">
                <a href="/art/">
                    <span>Art</span>
                </a>
            </li><li class="">
                <a href="/now/">
                    <span>Now</span>
                </a>
            </li></ul>
    </nav>

<main id="main" class="main">
    <section class="article-single">
        <article class="article-content">
            
            







<p>Written on <time datetime="2018-04-18 00:00:00 &#43;0000 UTC">18. Apr 2018</time>  </p>
            <p>I was recently researching different bash prompts and stumbled upon an <a href="https://unix.stackexchange.com/a/193660/136550" title="StackExchange answer for question 'In which situations are PS2, PS3, PS4 used as the prompt?'">StackExchange answer</a> which explains the different prompt types (<code>PS1</code>, <code>PS2</code>, <code>PS3</code>, and <code>PS4</code>). The answer explains how the PS3 prompt is used for commands like <code>select</code>. I did not know about select before, so that's the real <abbr title="Today I learned">TIL</abbr>
 here!</p>
<blockquote>
<p>[&hellip;] PS3 is shown when the select command is waiting for input [&hellip;]</p>
</blockquote>
<p>So the <code>PS3</code> prompt is shown when a bash program is waiting for user input, and it turns out that the <code>select</code> bash command is used for creating a &ldquo;choice&rdquo; <abbr title="User Interface">UI</abbr>
 in bash. So what does that mean and how does it work?</p>
<h2 id="asking-interactive-questions-in-bash">Asking interactive questions in Bash</h2>
<p>Let's assume we have a shell script called <code>make-project</code> which bootstraps some project stuff, for example configuration files. We could provide the user with an option to choose a format from a list of available configuration formats like <code>XML</code> or <code>JSON</code>.</p>
<p>We can handle these options via shell arguments like <code>make-project -format xml</code>, but we could also ask questions interactively using <code>select</code>.</p>
<p>The script looks like this.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># Default format</span>
format<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;xml&#34;</span>

<span style="color:#75715e"># Ask a question</span>
echo <span style="color:#e6db74">&#34;Which configuration format do you prefer?&#34;</span>
<span style="color:#75715e"># Create the &#34;UI&#34; with a choice option</span>
<span style="color:#66d9ef">select</span> f in xml json; <span style="color:#66d9ef">do</span>
  format<span style="color:#f92672">=</span>$f
  <span style="color:#75715e"># Break to end the select after something was selected</span>
  break;
<span style="color:#66d9ef">done</span>

echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Format: </span>$format<span style="color:#e6db74">&#34;</span>
</code></pre></div><p>The <code>select</code> function takes a variable name (<code>f</code> above) and a list of possible values (<code>xml json</code>) which is seperated by spaces.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#66d9ef">select</span> myvariable in value1 value2 value3; <span style="color:#66d9ef">do</span>
  <span style="color:#75715e"># $myvariable will be value1, value2, or value3</span>
  selectedValue <span style="color:#f92672">=</span> $myvariable
  break;
<span style="color:#66d9ef">done</span>
</code></pre></div><p>When our little <code>make-project</code> script is run it would looks like this (in Bash 4.4 on Mac OS):</p>
<pre><code>$ ./make-project.sh
Which configuration format do you prefer?
1) xml
2) json
#? _
</code></pre><p>The last line, <code>#?</code>, is the <code>PS3</code> prompt and <code>_</code> is the cursor position. The user can now enter a number (1 for <code>xml</code> or 2 for <code>json</code>) and the selection would be captured and assigned to the <code>format</code> variable in our script. If we add <code>export PS3=&quot;Your answer: &quot;</code> to the script it will replace the default PS3 prompt for your script as shown below.</p>
<pre><code>$ ./make-project.sh
Which configuration format do you prefer?
1) xml
2) json
Your answer: _
</code></pre><p><code>select</code> is a clean and simple way to create a interactive UI! I tried the code with the <code>zsh</code> and <code>fish</code> shell and it looks the same.</p>

        </article>
    </section>

    <section class="tags-categories">
        

<section class="categories">
    <h3>Categories</h3>
    <ul class="tag-list">
        
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts categorized under coding"
                href="https://kevingimbel.de/categories/coding/">coding</a>
        </li>
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts categorized under devops"
                href="https://kevingimbel.de/categories/devops/">devops</a>
        </li></ul>
</section>

        

<section class="tags">
    <h3>Tags</h3>
    <ul class="tag-list">
        
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts tagged with bash"
                href="https://kevingimbel.de/tags/bash/">bash</a>
        </li>
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts tagged with til"
                href="https://kevingimbel.de/tags/til/">til</a>
        </li>
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts tagged with shell"
                href="https://kevingimbel.de/tags/shell/">shell</a>
        </li></ul>
</section>

    </section>

    <section class="support">
    <h4>Like this?</h4>
    <p>This wesbite contains no <em>advertisement</em>, no <em>tracking</em>, no paid articles, and no
        shady-things-whatsoever. It is just content, provided free of charge and with accessibility in mind.</p>
    <p>If you would like to support me in providing <a href="/blog">content</a> - and <a
            href="https://github.com/kevingimbel" title="View open source code by Kevin Gimbel on GitHub">code</a> - for
        free or if this page has helped you or your company, consider supporting me directly.</p>
    <p>You can support me through:</p>
    <ul>
        <li><a href="https://paypal.me/kevingimbel">PayPal</a></li>
        <li><a href="https://liberapay.com/kevin/">Liberapay</a></li>
    </ul>
</section>
    <section class="author">
    <div class="left">
        <img src="/img/self-2019-small.jpg" alt="" class="avatar">
    </div>
    <div class="right">
        <h4>Kevin Gimbel</h4>
        <p><strong>is a DevOps Engineer and avid (Video) Gamer</strong>. He's also interested in Sci-Fi, Cyberpunk, and
            dystopian books.<br>
            You can find out more <a href="/about/" title="Read more about me">about me</a> if you wish.</p>
        <p>Follow me on <a href="https://bullgit.party/@kevin" rel="nofollow"
                title="Follow Kevin Gimbel on Mastodon, the decentralised social network"> Mastodon</a>. </p>
    </div>
</section>
</main>
<footer class="footer">
        <div class="left">
            <p>&copy; 2009 - 2020 Kevin Gimbel. See <a href="https://github.com/kevingimbel/kevingimbel.de/blob/master/LICENSE" title="View license on GitHub.com">License</a>.</p>
            <p><small>Follow me on Mastodon <a href="https://bullgit.party/@kevin" rel="me">kevin@bullgit.party</a></small></p>
            <p><small>You can contact me on Matrix at <a href="https://matrix.to/#/@kevingimbel:bullgit.science" title="Contact me on Matrix, a decentralised real-time messenger">@kevingimbel:bullgit.science</a></small>
            </p>
        </div>
        <div class="right">
            <p><small class="xx-small">Found an issue? <a href="https://github.com/kevingimbel/kevingimbel.de/tree/master/content/blog/2018-04-19-bash-select-options.md">Edit on
                        GitHub</a></small></p>
            <p><small class="xx-small">Made in Europe ðŸ‡ªðŸ‡º with love, <a href="/thanks">open source code</a> and <a href="https://gohugo.io/" title="Hugo static site generator" rel="nofollow">hugo</a>.<span class="fg-accent">&hearts;</span>.</small>
            </p>
            <p><small class="xx-small"><code>Â¯\_(ãƒ„)_/Â¯</code></small></p>
        </div>
    </footer>


    

    

    
</body>

</html>
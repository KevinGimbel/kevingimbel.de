<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TIL: Bash select &mdash; KevOps ‚Äî DevOps, Cooking, and everything else I want to write about</title>
    <meta name="author" content="Kevin Gimbel">
    <meta name="description" content="Personal website of Kevin Gimbel, DevOps Engineer, about photography, books, coding, devops, gaming, and whatever comes in between">
    <meta keywords="bash til shell  blog coding devops  ">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üßô‚Äç‚ôÇÔ∏è</text></svg>">
    
    
    
    <link rel="stylesheet" href="https://kevingimbel.de/sass/main.min.css">
    
    <link rel="stylesheet" href="https://kevingimbel.de/sass/page.min.css">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@kevingimbel">
    <meta name="twitter:creator" content="@_kevinatari">
    <meta name="twitter:title" content="TIL: Bash select">
    <meta name="twitter:description" content="I was recently researching different bash prompts and stumbled upon an StackExchange answer which explains the different prompt types (PS1, PS2, PS3, and PS4). The answer explains how the PS3 prompt is used for commands like select. I did not know about select before, so that&rsquo;s the real TIL here!
 [&hellip;] PS3 is shown when the select command is waiting for input [&hellip;]
 So the PS3 prompt is shown when a bash program is waiting for user input, and it turns out that the select bash command is used for creating a &ldquo;choice&rdquo; UI in bash.">
    

</head>
<body class="type-page section-blog">
    <script type="text/javascript">(function(document,window,undefined){function css_to_int(cssStyleDeclaration,unitStr){return parseInt(cssStyleDeclaration.replace(unitStr,''));}
function pre_header_show(element){element.style.setProperty('margin-top',0);element.dataset.shown=true;}
function pre_header_hide(element){let this_height=window.getComputedStyle(element).height;element.style.setProperty('margin-top',`-${this_height}`);element.dataset.shown=false;}
function is_element_hidden(element){return['none'].indexOf(window.getComputedStyle(element).display)>-1;}
document.addEventListener('DOMContentLoaded',()=>{const pre_header_element=document.querySelector('#pre-header');const pre_header_toggle=document.querySelector('#pre-header-toggle');if(!is_element_hidden(pre_header_toggle)){pre_header_hide(pre_header_element);}
pre_header_toggle.addEventListener('click',(event)=>{if(pre_header_element.dataset.shown=="true"){pre_header_hide(pre_header_element);}else{pre_header_show(pre_header_element);}});window.addEventListener('resize',()=>{if(!is_element_hidden(pre_header_toggle)){pre_header_hide(pre_header_element);}else{pre_header_show(pre_header_element);}});});}(document,window));</script>
    
    <script type="text/javascript" src="https://kevingimbel.de/js/webcomponent.colorswitch.min.js"></script>
    <script type="text/javascript" src="https://kevingimbel.de/js/webcomponent.darkmode.min.js"></script>
    <script type="text/javascript" src="https://kevingimbel.de/js/webcomponent.fontsize.min.js"></script>
    <script type="text/javascript" src="https://kevingimbel.de/js/webcomponent.contentwidth.min.js"></script>
    <span style="display: none;" aria-hidden="true" id="widget_color_changer_txt_keep">Keep current color theme</span>
    <span style="display: none;" aria-hidden="true" id="widget_color_changer_txt_random">Use random color theme</span>
    
    <section class="main-grid">
    
        <header class="pre-header" id="pre-header">
            <kg-colorswitcher>Color theme</kg-colorswitcher>
            <kg-darkmode>Dark mode</kg-darkmode>
            
            <kg-fontsize>Font size</kg-fontsize>
            <kg-contentwidth>Content width</kg-contentwidth>
            
        </header>
    
        <header class="site-header">
            <nav role="navigation" id="navigation" aria-label="Main Navigation">
                <ul class="nav-main">
                    
                    <li class="nav-item">
                        <a href="/" data-perm="/blog/2018/04/til-bash-select/" >Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="/blog/" data-perm="/blog/2018/04/til-bash-select/" >Blog</a>
                    </li>
                    <li class="nav-item">
                        <a href="/about/" data-perm="/blog/2018/04/til-bash-select/" >About</a>
                    </li>
                    <li class="nav-item">
                        <a href="/photography/" data-perm="/blog/2018/04/til-bash-select/" >Photography</a>
                    </li><button id="pre-header-toggle" class="btn-preheader-toggle">Settings</button>
                    </ul>
                    </nav>
        </header>

    <section class="site-main-content">
<main id="main" class="main">
<section class="article-single" style="--this-border-radius: 16px 26px 32px 52px;"> 
        <header class="article-header">
            






<h1>TIL: Bash select</h1>




<p class="publish-date">Published on 04/18/2018 </p>
        </header>
        <article class="article-content">

            
            <div class="content">
                <p>I was recently researching different bash prompts and stumbled upon an <a href="https://unix.stackexchange.com/a/193660/136550" title="StackExchange answer for question 'In which situations are PS2, PS3, PS4 used as the prompt?'">StackExchange answer</a> which explains the different prompt types (<code>PS1</code>, <code>PS2</code>, <code>PS3</code>, and <code>PS4</code>). The answer explains how the PS3 prompt is used for commands like <code>select</code>. I did not know about select before, so that&rsquo;s the real <abbr title="Today I learned">TIL</abbr>
 here!</p>
<blockquote>
<p>[&hellip;] PS3 is shown when the select command is waiting for input [&hellip;]</p>
</blockquote>
<p>So the <code>PS3</code> prompt is shown when a bash program is waiting for user input, and it turns out that the <code>select</code> bash command is used for creating a &ldquo;choice&rdquo; <abbr title="User Interface">UI</abbr>
 in bash. So what does that mean and how does it work?</p>
<h2 id="asking-interactive-questions-in-bash">Asking interactive questions in Bash</h2>
<p>Let&rsquo;s assume we have a shell script called <code>make-project</code> which bootstraps some project stuff, for example configuration files. We could provide the user with an option to choose a format from a list of available configuration formats like <code>XML</code> or <code>JSON</code>.</p>
<p>We can handle these options via shell arguments like <code>make-project -format xml</code>, but we could also ask questions interactively using <code>select</code>.</p>
<p>The script looks like this.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#75715e"># Default format</span>
format<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;xml&#34;</span>

<span style="color:#75715e"># Ask a question</span>
echo <span style="color:#e6db74">&#34;Which configuration format do you prefer?&#34;</span>
<span style="color:#75715e"># Create the &#34;UI&#34; with a choice option</span>
<span style="color:#66d9ef">select</span> f in xml json; <span style="color:#66d9ef">do</span>
  format<span style="color:#f92672">=</span>$f
  <span style="color:#75715e"># Break to end the select after something was selected</span>
  break;
<span style="color:#66d9ef">done</span>

echo <span style="color:#e6db74">&#34;Format: </span>$format<span style="color:#e6db74">&#34;</span>
</code></pre></div><p>The <code>select</code> function takes a variable name (<code>f</code> above) and a list of possible values (<code>xml json</code>) which is seperated by spaces.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#66d9ef">select</span> myvariable in value1 value2 value3; <span style="color:#66d9ef">do</span>
  <span style="color:#75715e"># $myvariable will be value1, value2, or value3</span>
  selectedValue <span style="color:#f92672">=</span> $myvariable
  break;
<span style="color:#66d9ef">done</span>
</code></pre></div><p>When our little <code>make-project</code> script is run it would looks like this (in Bash 4.4 on Mac OS):</p>
<pre><code>$ ./make-project.sh
Which configuration format do you prefer?
1) xml
2) json
#? _
</code></pre><p>The last line, <code>#?</code>, is the <code>PS3</code> prompt and <code>_</code> is the cursor position. The user can now enter a number (1 for <code>xml</code> or 2 for <code>json</code>) and the selection would be captured and assigned to the <code>format</code> variable in our script. If we add <code>export PS3=&quot;Your answer: &quot;</code> to the script it will replace the default PS3 prompt for your script as shown below.</p>
<pre><code>$ ./make-project.sh
Which configuration format do you prefer?
1) xml
2) json
Your answer: _
</code></pre><p><code>select</code> is a clean and simple way to create a interactive UI! I tried the code with the <code>zsh</code> and <code>fish</code> shell and it looks the same.</p>

            </div>
        </article>
    </section>
</main>
</section>

    <section class="site-support">
<section class="tags-categories">
    

<section class="categories">
    <h3>Categories</h3>
    <ul class="tag-list">
        
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts categorized under coding"
                href="https://kevingimbel.de/categories/coding/">coding</a>
        </li>
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts categorized under devops"
                href="https://kevingimbel.de/categories/devops/">devops</a>
        </li></ul>
</section>

    

<section class="tags">
    <h3>Tags</h3>
    <ul class="tag-list">
        
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts tagged with bash"
                href="https://kevingimbel.de/tags/bash/">bash</a>
        </li>
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts tagged with til"
                href="https://kevingimbel.de/tags/til/">til</a>
        </li>
        <li class="tag-list__item">
            <a class="tag-list__link" title="View all posts tagged with shell"
                href="https://kevingimbel.de/tags/shell/">shell</a>
        </li></ul>
</section>

</section>
    <section class="article-nextprev">
  <article class="article__next">
      <span class="txt--bold">Next article</span><br>
  
      <a class="txt--medium" href="https://kevingimbel.de/blog/2018/09/mastodon-embed-shortcode-for-hugo/" title="Mastodon Embed Shortcode for hugo">Mastodon Embed Shortcode for hugo</a>
  
  </article>

  <article class="article__prev">
      <span class="txt--bold">Previous article</span><br>
  
      <a class="txt--medium" href="https://kevingimbel.de/blog/2017/11/css-custom-properties-and-a-new-look/" title="CSS Custom Properties and a new look">CSS Custom Properties and a new look</a>
      
  </article>
</section>
    <section class="support">
    <h4>Like this?</h4>
    <p>If this content has helped you or your company, consider making a donation to a good cause.</p>
    <p>For example, consider donating to the following causes:</p>
    <div class="support-cause-list__wrapper">
        <ul class="support-cause-list">
            <li class="head"><b>International</b></li>
            <li><a rel="nofollow" href="https://donate.doctorswithoutborders.org/onetime.cfm">Doctors without borders</a></li>
            <li><a rel="nofollow" href="https://www.amnesty.org/en/donate/">Amnesty International</a></li>
        </ul>
        <ul class="support-cause-list">
            <li class="head"><b>Germany</b></li>
            <li><a rel="nofollow" href="https://www.uno-fluechtlingshilfe.de/unterstuetzen/spenden/jetzt-spenden/">UNO Fl√ºchtlingshilfe</a></li>
            <li><a rel="nofollow" href="https://www.amnesty.de/spenden">Amnesty</a></li>
            <li><a rel="nofollow" href="https://www.greenpeace.de/spenden">Greenpeace</a></li>
        </ul>
    </div>
</section>

    <section class="author">
    <div class="left">
        <img src="/images/general/kevin-gimbel-2020_hu6d6852ea5f23d3570eb4d6a09e2c1824_341389_200x200_resize_q75_box.jpg" alt="A Selfie of me" class="avatar">
    </div>
    <div class="right">
        <p>Kevin Gimbel</p>
<p><strong>is a DevOps Engineer and avid (Video) Gamer</strong>. He&rsquo;s also interested in Sci-Fi, Cyberpunk, and dystopian books.</p>
<p><em>Wearing a mask is a good idea!</em></p>
<p>You can find out more <a href="/about/">about me</a> if you wish.</p>

    </div>
</section>
</section>

    <footer class="site-footer footer">
        
        
        
        <nav role="navigation" id="footer-navigation" aria-label="Secondary Navigation">
        <p>More sections on this site </p>
        <ul class="nav-footer">
            <li class="nav-item">
                <a href="/reading/">Books</a>
            </li>
            <li class="nav-item">
                <a href="/link-list/">Links</a>
            </li>
            <li class="nav-item">
                <a href="/art/">Art</a>
            </li>
            <li class="nav-item">
                <a href="/now/">Now</a>
            </li>
            <li class="nav-item">
                <a href="/rss/">RSS</a>
            </li></ul>
        </nav>
        


        <div class="left">
            <p>&copy; 2009 - 2021 Kevin Gimbel. <a href="https://github.com/kevingimbel/kevingimbel.de/blob/master/LICENSE" title="View License on GitHub.com">License</a>. <a href="/blog/2020/01/no-tracking/">No Tracking</a>.</p>
            <p><small>Follow me on <a href="https://twitter.com/kevingimbel" title="Follow me on Twitter">Twitter @kevingimbel</a></small></p>
            </p>
        </div>
        <div class="right">
            <p><small class="xx-small">Found an issue? Edit this <a href="https://github.com/kevingimbel/kevingimbel.de/tree/master/content/en/blog/2018-04-19-bash-select-options.md">page on GitHub.com</a></a></small></p>
            <p><small class="xx-small">Made in Europe üá™üá∫ with love, <a href="/thanks">open source code</a> and <a href="https://gohugo.io/" title="Hugo static site generator" rel="nofollow">hugo</a>.<span class="fg-accent">&hearts;</span>.</small>
            </p>
            <p><small class="xx-small"><a href="/legal">Imprint</a></small></p>
            <p><small class="xx-small"><code>¬Ø\_(„ÉÑ)_/¬Ø</code></small></p>
        </div>  
    </footer>
    </section>
    


</body>

</html>

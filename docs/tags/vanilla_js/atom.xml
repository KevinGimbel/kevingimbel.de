<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-us"><generator uri="https://gohugo.io/" version="0.70.0">Hugo</generator><title type="html">vanilla_js on KevOps</title><link href="https://kevingimbel.de/tags/vanilla_js/" rel="alternate" type="text/html" title="HTML"/><link href="https://kevingimbel.de/tags/vanilla_js/index.xml" rel="alternate" type="application/rss+xml" title="RSS"/><link href="https://kevingimbel.de/tags/vanilla_js/atom.xml" rel="self" type="application/atom+xml" title="Atom"/><updated>2020-05-14T10:39:18+02:00</updated><id>https://kevingimbel.de/tags/vanilla_js/</id><entry><title type="html">To infinity and beyond</title><link href="https://kevingimbel.de/blog/2013/11/to-infinity-and-beyond/?utm_source=atom_feed" rel="alternate" type="text/html"/><link href="https://kevingimbel.de/blog/2013/10/i-js/?utm_source=atom_feed" rel="related" type="text/html" title="i-js"/><id>https://kevingimbel.de/blog/2013/11/to-infinity-and-beyond/</id><published>2013-11-18T00:00:00+00:00</published><updated>2013-11-18T00:00:00+00:00</updated><content type="html"><![CDATA[<p>While I was re-designing my Website I decided to finally add some JavaScript to it. I&rsquo;m learning JavaScript for like 2 months now and - to be honest - I finally understand most of the things I&rsquo;m doing. Yesterday night&rsquo;s topic was a &ldquo;Back to Top&rdquo; Button written in Vanilla JS. Actually the code behind it is <em>kinda</em> simple, however, I wrote an endless function that got to infinity and beyond (that&rsquo;s where the title comes from. I&rsquo;m so funny.)</p>
<p>Because I still like to google around while writing JavaScript I stumbled upon a function that looked okay to me.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">scrollToTop</span>() {
  <span style="color:#66d9ef">if</span> (document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">scrollTop</span><span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">scrollTop</span><span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span>){
    window.<span style="color:#a6e22e">scrollBy</span>(<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">50</span>);
    <span style="color:#a6e22e">timeOut</span><span style="color:#f92672">=</span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#e6db74">&#39;scrollToTop()&#39;</span>,<span style="color:#ae81ff">10</span>);
  }
  <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">clearTimeout</span>(<span style="color:#a6e22e">timeOut</span>);
}
</code></pre></div><p>The problem with this one was: It didn&rsquo;t work. So I looked around and found <code>setInterval()</code> which seemed to me a bit like <code>setTimeout</code> and - in my opinion - would mix perfect with <code>scrollBy(x,y)</code>. I was right, hurray!</p>
<p>So my function then looked a bit like this (I&rsquo;m not exactly sure, it was kinda late already).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">scrollToTop</span>() {
    <span style="color:#66d9ef">if</span>(window.<span style="color:#a6e22e">scrollY</span><span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">scrollBack</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(<span style="color:#66d9ef">function</span>() {
            window.<span style="color:#a6e22e">scrollBy</span>(<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">50</span>);
        },<span style="color:#ae81ff">10</span>);
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">clearInterval</span>(<span style="color:#a6e22e">scrollBack</span>);
    };
  }   
</code></pre></div><p>I applied the function to a button, the page scrolled up and I was happy. I <a href="https://twitter.com/_kevinatari/status/402189289422721024">tweeted</a> about it just to find out that my Interval wasn&rsquo;t cleared and I <a href="https://twitter.com/_kevinatari/status/402190105533640704">could never scroll down again</a> after the function was triggered. Yeah! Awesome.</p>
<p>Well, I thought more about it and read again about <code>setInterval</code> and - most important - the actual object I&rsquo;m checking. <code>scrollY</code> was the right direction and I decided it must be the Interval that&rsquo;s wrong. I was right and came up with this sweet function!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// notice: backTop is my back to top button!
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">backTop</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;click&#34;</span>,<span style="color:#66d9ef">function</span>() {
    <span style="color:#75715e">// setting an interval 
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">toTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(<span style="color:#66d9ef">function</span>() {
      <span style="color:#75715e">// if we&#39;re not on top of the page
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(window.<span style="color:#a6e22e">scrollY</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
          <span style="color:#75715e">// we scroll back to the top [scrollBy(x,y)]
</span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">scrollBy</span>(<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">50</span>);

            <span style="color:#75715e">// in case we&#39;re at the top (window.scrollY = 0)
</span><span style="color:#75715e"></span>      } <span style="color:#66d9ef">else</span> {
              <span style="color:#75715e">// clear the interval
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">clearInterval</span>(<span style="color:#a6e22e">toTop</span>);
      }
    },<span style="color:#ae81ff">25</span>); <span style="color:#75715e">// the delay between the steps to go back to top. The smaller the number, the slower it goes
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// prevent the click to reload the page
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">preventDefault</span>();
  }); <span style="color:#75715e">// end of the Back to Top function
</span></code></pre></div><p>That&rsquo;s it! My sweet little Back To Top Function. I&rsquo;m sure there are points that could be improved and I&rsquo;m sure one could add easing to it (I already got something in mind) but for now I&rsquo;m happy with it.</p>
<p>(Also check out what else I discovered yesterday. It&rsquo;s an <a href="https://twitter.com/_kevinatari/status/402197154539651072">YouTube Eater Egg</a>!)</p>
]]></content><category scheme="https://kevingimbel.de/categories/coding" term="coding" label="coding"/><category scheme="https://kevingimbel.de/categories/javascript" term="javascript" label="javascript"/><category scheme="https://kevingimbel.de/categories/frontend" term="frontend" label="frontend"/><category scheme="https://kevingimbel.de/tags/javascript" term="javascript" label="javascript"/><category scheme="https://kevingimbel.de/tags/vanilla_js" term="vanilla_js" label="vanilla_js"/></entry></feed>
{{ define "main" }}
{{ with .Site.Params.debug }}
{{ partial "debug.html" "_default/list.html" }}
{{ end }}
<main id="main {{ .Section }}" class="main">
    {{ with .Content }}
    <section class="article-list__intro">
        {{ . }}
    </section>
    {{ end }}

    {{ partial "page-nav.html" . }}

    {{ partial "subscribe-rss.html" . }}

    {{ range (where .Site.Pages "Section" .Section).GroupByDate "2006" }}
        <header class="article-list__header">
            <h2 id="{{ .Key }}" class="section-headline">{{ .Key }}</h2>
            <p>{{ i18n "ui_post_count_in_year" . }} | <a href="#years">{{ i18n "ui_back_to_navigation" }}</a></p>
        </header>
        {{ range .Pages }}
            {{- if (fileExists (printf "layouts/_default/article-preview-%s.html" .Params.Type)) -}}
                {{ .Render (printf "article-preview-%s" .Params.Type) }}
            {{ else }}
                {{ .Render "article-preview-default" }}
            {{- end }}
        {{ end }}
    {{ end }}
</main>
{{ end }}
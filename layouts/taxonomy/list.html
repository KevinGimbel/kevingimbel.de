{{ define "main" }}
{{ with .Site.Params.debug }}
{{ partial "debug.html" "taxonomy/list.html" }}
{{ end }}

{{- $borderStyle := partial "helper-border-radius.html" . -}}
<main id="main" {{ printf "style=%q" $borderStyle | safeHTMLAttr }} class="main {{ .Section }}">
    <section class="article-list__intro">
        {{ with .Content }}
            {{ . }}
        {{ end }}
        <p>{{ i18n "ui_tag_list_intro" }}</p>
        </section>

    {{ $i := 0 }}
    {{ $terms := .Data.Terms.ByCount  }}
    
    {{ range $terms }}
    
    {{ $i = add $i 1 }}
    {{ $borderStyle :=  printf "--this-border-radius: var(--border-radius-fancy-%d)" $i }}
    <section class="term-wrapper flow" {{ printf "style=%q" $borderStyle | safeHTMLAttr }}>
            <header>
                <h3 id="{{ .Page.Title | urlize }}"><a href="#{{ .Page.Title | lower | urlize }}">{{ .Page.Title }}</a> <span class="txt--small term__count">({{ .Count }})</span></h3>
            </header>
            {{ range .Pages.GroupByDate "2006" }}
                <article class="flow">
                    <h4>{{ .Key }}</h4>
                    <ul class="term-list">
                        {{ range .Pages }}
                            <li class="term-list__item"><a class="term-list__link" href="{{ .Permalink }}">{{ .Title }}</a></li>
                        {{ end }}
                    </ul>
                </article>
            {{ end }}
        </section>

        {{ if gt $i 3 }}
            {{ $i = 0 }}
        {{ end }}
    {{ end }}

</main>
{{ end }}